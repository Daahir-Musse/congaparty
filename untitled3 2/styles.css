:root { --bg:#0a0a0a; --fg:#fff; }

*{ box-sizing:border-box; }
html,body{ height:100%; }
body{
  margin:0; background:var(--bg); color:var(--fg);
  font-family:system-ui,-apple-system,Segoe UI,Roboto,Inter,sans-serif;
  overflow:hidden;
}

/* Gate */
#gate{
  position:fixed; inset:0; display:grid; place-items:center; gap:1rem;
  background:radial-gradient(1200px 800px at 50% 50%, #161616, #000);
  text-align:center;
}
#gate h1{ margin:0 1rem; font-weight:800; letter-spacing:.5px; }
#go{
  font:inherit; padding:.9rem 1.2rem; border-radius:999px; border:0; cursor:pointer;
  background:#ff2d55; color:#fff; box-shadow:0 10px 30px rgb(255 45 85 / .35);
}
.hint{ opacity:.6; font-size:.9rem }

/* Stage */
#stage{
  position:fixed; inset:0; display:grid; place-items:center;
  pointer-events:none; transform:translateZ(0); opacity:0;
}

/* Ghost layer (each ghost is an <img> so GIF frames animate) */
#ghosts{
  position:fixed; inset:0; z-index:2; pointer-events:none; overflow:hidden;
}
.ghost{
  position:absolute; left:0; top:0;
  width:min(360px, 55vmin);
  image-rendering:pixelated;
  filter: drop-shadow(0 14px 28px rgba(0,0,0,.45));
  opacity: var(--o, .36);
  transform: translate(var(--x0, 0px), var(--y0, 0px)) scale(var(--s0, 1));
  animation: ghost-drift var(--dur, 18s) linear forwards;
  will-change: transform, opacity;
}
@keyframes ghost-drift{
  0%   { transform: translate(var(--x0), var(--y0)) scale(var(--s0)); opacity: 0; }
  8%   { opacity: var(--o); }
  92%  { opacity: var(--o); }
  100% { transform: translate(var(--x1), var(--y1)) scale(var(--s1)); opacity: 0; }
}

/* Main dancer */
#dancer{
  z-index:3;
  width:min(280px, 45vmin);
  image-rendering:pixelated;
  filter: drop-shadow(0 20px 40px rgba(0,0,0,.5));
}

/* Caption */
#caption{
  position:fixed; top:16px; left:50%; transform:translateX(-50%);
  font-weight:900; letter-spacing:.06em; text-transform:uppercase;
  text-shadow:0 2px 0 #000, 0 0 10px rgb(255 255 255 / .35);
  user-select:none; opacity:.9; z-index:4;
}

/* Audio UI */
#audio-warning{
  position:fixed; bottom:76px; left:50%; transform:translateX(-50%);
  background:#111; color:#fff; padding:.5rem .75rem; border-radius:.75rem;
  font-size:.9rem; opacity:.9; z-index:5;
}
#audio-controls{
  position:fixed; bottom:20px; left:50%; transform:translateX(-50%);
  z-index:5; pointer-events:auto;
}

/* Party animations */
.party-bg{ animation:hue 6s linear infinite, pulseGlow .5s linear infinite; }
.party-dancer{ animation:bounce .5s ease-in-out infinite, wiggle 2s ease-in-out infinite; }
.party-caption{ animation:bop .5s ease-in-out infinite; }

@keyframes hue{ to{ filter:hue-rotate(360deg); } }
@keyframes pulseGlow{
  0%,100%{ box-shadow:inset 0 0 0 9999px rgb(255 255 255 / 0) }
  50%{ box-shadow:inset 0 0 0 9999px rgb(255 255 255 / .05) }
}
@keyframes bounce{ 0%,100%{ transform:translateY(0) scale(1) } 50%{ transform:translateY(-12px) scale(1.05) } }
@keyframes bop{ 0%,100%{ transform:translate(-50%,0) scale(1) } 50%{ transform:translate(-50%,-4px) scale(1.02) } }
@keyframes wiggle{ 0%,100%{ transform:rotate(0) } 25%{ transform:rotate(2.5deg) } 75%{ transform:rotate(-2.5deg) } }

.strobe{ background:#000; }

/* Respect reduced motion by default, but allow override via .force-motion */
@media (prefers-reduced-motion: reduce){
  body:not(.force-motion) .party-bg,
  body:not(.force-motion) .party-dancer,
  body:not(.force-motion) .party-caption,
  body:not(.force-motion) .ghost{ animation:none !important }
}
